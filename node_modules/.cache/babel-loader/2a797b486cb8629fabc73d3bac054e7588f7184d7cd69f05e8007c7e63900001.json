{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/lefty/Documents/reactproject/music-player/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/lefty/Documents/reactproject/music-player/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"C:/Users/lefty/Documents/reactproject/music-player/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/lefty/Documents/reactproject/music-player/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faPlay,faAngleLeft,faAngleRight,faPause,faVolumeDown}from\"@fortawesome/free-solid-svg-icons\";import{playAudio}from\"../util\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Player=function Player(_ref){var isPlaying=_ref.isPlaying,setIsPlaying=_ref.setIsPlaying,audioRef=_ref.audioRef,songInfo=_ref.songInfo,setSongInfo=_ref.setSongInfo,currentSong=_ref.currentSong,songs=_ref.songs,setCurrentSong=_ref.setCurrentSong,setSongs=_ref.setSongs;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),activeVolume=_useState2[0],setActiveVolume=_useState2[1];//UseEffect Update List\nvar activeLibraryHandler=function activeLibraryHandler(nextPrev){var newSongs=songs.map(function(song){if(song.id===nextPrev.id){return _objectSpread(_objectSpread({},song),{},{active:true});}else{return _objectSpread(_objectSpread({},song),{},{active:false});}});setSongs(newSongs);};var trackAnim={transform:\"translateX(\".concat(songInfo.animationPercentage,\"%)\")};//Event Handlers\nfunction getTime(time){return Math.floor(time/60)+\":\"+(\"0\"+Math.floor(time%60)).slice(-2);}var dragHandler=function dragHandler(e){audioRef.current.currentTime=e.target.value;setSongInfo(_objectSpread(_objectSpread({},songInfo),{},{currentTime:e.target.value}));};var playSongHandler=function playSongHandler(){if(isPlaying){audioRef.current.pause();setIsPlaying(!isPlaying);}else{audioRef.current.play();setIsPlaying(!isPlaying);}};var skipTrackHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(direction){var currentIndex;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:currentIndex=songs.findIndex(function(song){return song.id===currentSong.id;});//Forward BAck\nif(!(direction===\"skip-forward\")){_context.next=5;break;}_context.next=4;return setCurrentSong(songs[(currentIndex+1)%songs.length]);case 4:activeLibraryHandler(songs[(currentIndex+1)%songs.length]);case 5:if(!(direction===\"skip-back\")){_context.next=15;break;}if(!((currentIndex-1)%songs.length===-1)){_context.next=12;break;}_context.next=9;return setCurrentSong(songs[songs.length-1]);case 9:activeLibraryHandler(songs[songs.length-1]);playAudio(isPlaying,audioRef);return _context.abrupt(\"return\");case 12:_context.next=14;return setCurrentSong(songs[(currentIndex-1)%songs.length]);case 14:activeLibraryHandler(songs[(currentIndex-1)%songs.length]);case 15:if(isPlaying)audioRef.current.play();case 16:case\"end\":return _context.stop();}},_callee);}));return function skipTrackHandler(_x){return _ref2.apply(this,arguments);};}();var changeVolume=function changeVolume(e){var value=e.target.value;audioRef.current.volume=value;setSongInfo(_objectSpread(_objectSpread({},songInfo),{},{volume:value}));};return/*#__PURE__*/_jsxs(\"div\",{className:\"player\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"time-control\",children:[/*#__PURE__*/_jsx(\"p\",{children:getTime(songInfo.currentTime)}),/*#__PURE__*/_jsxs(\"div\",{style:{background:\"linear-gradient(to right, \".concat(currentSong.color[0],\",\").concat(currentSong.color[1],\")\")},className:\"track\",children:[/*#__PURE__*/_jsx(\"input\",{value:songInfo.currentTime,type:\"range\",max:songInfo.duration||0,min:0,onChange:dragHandler}),/*#__PURE__*/_jsx(\"div\",{style:trackAnim,className:\"animate-track\"})]}),/*#__PURE__*/_jsx(\"p\",{children:songInfo.duration?getTime(songInfo.duration):\"0:00\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"play-control\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{onClick:function onClick(){return skipTrackHandler(\"skip-back\");},className:\"skip-back\",size:\"2x\",icon:faAngleLeft}),/*#__PURE__*/_jsx(FontAwesomeIcon,{onClick:playSongHandler,className:\"play\",size:\"2x\",icon:isPlaying?faPause:faPlay}),/*#__PURE__*/_jsx(FontAwesomeIcon,{className:\"skip-forward\",size:\"2x\",icon:faAngleRight,onClick:function onClick(){return skipTrackHandler(\"skip-forward\");}}),/*#__PURE__*/_jsx(FontAwesomeIcon,{onClick:function onClick(){return setActiveVolume(!activeVolume);},icon:faVolumeDown}),activeVolume&&/*#__PURE__*/_jsx(\"input\",{onChange:changeVolume,value:songInfo.volume,max:\"1\",min:\"0\",step:\"0.01\",type:\"range\"})]})]});};export default Player;","map":{"version":3,"names":["React","useState","FontAwesomeIcon","faPlay","faAngleLeft","faAngleRight","faPause","faVolumeDown","playAudio","jsx","_jsx","jsxs","_jsxs","Player","_ref","isPlaying","setIsPlaying","audioRef","songInfo","setSongInfo","currentSong","songs","setCurrentSong","setSongs","_useState","_useState2","_slicedToArray","activeVolume","setActiveVolume","activeLibraryHandler","nextPrev","newSongs","map","song","id","_objectSpread","active","trackAnim","transform","concat","animationPercentage","getTime","time","Math","floor","slice","dragHandler","e","current","currentTime","target","value","playSongHandler","pause","play","skipTrackHandler","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","direction","currentIndex","wrap","_callee$","_context","prev","next","findIndex","length","abrupt","stop","_x","apply","arguments","changeVolume","volume","className","children","style","background","color","type","max","duration","min","onChange","onClick","size","icon","step"],"sources":["C:/Users/lefty/Documents/reactproject/music-player/src/components/Player.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport {\r\n  faPlay,\r\n  faAngleLeft,\r\n  faAngleRight,\r\n  faPause,\r\n  faVolumeDown,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nimport { playAudio } from \"../util\";\r\n\r\nconst Player = ({\r\n  isPlaying,\r\n  setIsPlaying,\r\n  audioRef,\r\n  songInfo,\r\n  setSongInfo,\r\n  currentSong,\r\n  songs,\r\n  setCurrentSong,\r\n  setSongs,\r\n}) => {\r\n  const [activeVolume, setActiveVolume] = useState(false);\r\n  //UseEffect Update List\r\n  const activeLibraryHandler = (nextPrev) => {\r\n    const newSongs = songs.map((song) => {\r\n      if (song.id === nextPrev.id) {\r\n        return {\r\n          ...song,\r\n          active: true,\r\n        };\r\n      } else {\r\n        return {\r\n          ...song,\r\n          active: false,\r\n        };\r\n      }\r\n    });\r\n\r\n    setSongs(newSongs);\r\n  };\r\n\r\n  const trackAnim = {\r\n    transform: `translateX(${songInfo.animationPercentage}%)`,\r\n  };\r\n  //Event Handlers\r\n  function getTime(time) {\r\n    return (\r\n      Math.floor(time / 60) + \":\" + (\"0\" + Math.floor(time % 60)).slice(-2)\r\n    );\r\n  }\r\n  const dragHandler = (e) => {\r\n    audioRef.current.currentTime = e.target.value;\r\n    setSongInfo({ ...songInfo, currentTime: e.target.value });\r\n  };\r\n\r\n  const playSongHandler = () => {\r\n    if (isPlaying) {\r\n      audioRef.current.pause();\r\n      setIsPlaying(!isPlaying);\r\n    } else {\r\n      audioRef.current.play();\r\n      setIsPlaying(!isPlaying);\r\n    }\r\n  };\r\n  const skipTrackHandler = async (direction) => {\r\n    let currentIndex = songs.findIndex((song) => song.id === currentSong.id);\r\n\r\n    //Forward BAck\r\n    if (direction === \"skip-forward\") {\r\n      await setCurrentSong(songs[(currentIndex + 1) % songs.length]);\r\n      activeLibraryHandler(songs[(currentIndex + 1) % songs.length]);\r\n    }\r\n    if (direction === \"skip-back\") {\r\n      if ((currentIndex - 1) % songs.length === -1) {\r\n        await setCurrentSong(songs[songs.length - 1]);\r\n        activeLibraryHandler(songs[songs.length - 1]);\r\n        playAudio(isPlaying, audioRef);\r\n        return;\r\n      }\r\n      await setCurrentSong(songs[(currentIndex - 1) % songs.length]);\r\n      activeLibraryHandler(songs[(currentIndex - 1) % songs.length]);\r\n    }\r\n    if (isPlaying) audioRef.current.play();\r\n  };\r\n  const changeVolume = (e) => {\r\n    let value = e.target.value;\r\n    audioRef.current.volume = value;\r\n    setSongInfo({ ...songInfo, volume: value });\r\n  };\r\n\r\n  return (\r\n    <div className=\"player\">\r\n      <div className=\"time-control\">\r\n        <p>{getTime(songInfo.currentTime)}</p>\r\n        <div\r\n          style={{\r\n            background: `linear-gradient(to right, ${currentSong.color[0]},${currentSong.color[1]})`,\r\n          }}\r\n          className=\"track\"\r\n        >\r\n          <input\r\n            value={songInfo.currentTime}\r\n            type=\"range\"\r\n            max={songInfo.duration || 0}\r\n            min={0}\r\n            onChange={dragHandler}\r\n          />\r\n          <div style={trackAnim} className=\"animate-track\"></div>\r\n        </div>\r\n        <p>{songInfo.duration ? getTime(songInfo.duration) : \"0:00\"}</p>\r\n      </div>\r\n      <div className=\"play-control\">\r\n        <FontAwesomeIcon\r\n          onClick={() => skipTrackHandler(\"skip-back\")}\r\n          className=\"skip-back\"\r\n          size=\"2x\"\r\n          icon={faAngleLeft}\r\n        />\r\n        <FontAwesomeIcon\r\n          onClick={playSongHandler}\r\n          className=\"play\"\r\n          size=\"2x\"\r\n          icon={isPlaying ? faPause : faPlay}\r\n        />\r\n        <FontAwesomeIcon\r\n          className=\"skip-forward\"\r\n          size=\"2x\"\r\n          icon={faAngleRight}\r\n          onClick={() => skipTrackHandler(\"skip-forward\")}\r\n        />\r\n        <FontAwesomeIcon\r\n          onClick={() => setActiveVolume(!activeVolume)}\r\n          icon={faVolumeDown}\r\n        />\r\n        {activeVolume && (\r\n          <input\r\n            onChange={changeVolume}\r\n            value={songInfo.volume}\r\n            max=\"1\"\r\n            min=\"0\"\r\n            step=\"0.01\"\r\n            type=\"range\"\r\n          />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Player;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}