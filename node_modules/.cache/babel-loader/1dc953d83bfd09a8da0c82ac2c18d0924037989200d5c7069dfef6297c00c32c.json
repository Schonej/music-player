{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/lefty/Documents/reactproject/music-player/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/lefty/Documents/reactproject/music-player/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"C:/Users/lefty/Documents/reactproject/music-player/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/lefty/Documents/reactproject/music-player/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useRef}from\"react\";import\"./styles/app.scss\";//Import Components\nimport Player from\"./components/Player\";import Song from\"./components/Song\";import Library from\"./components/Library\";import Nav from\"./components/Nav\";//Import data\nimport chillhop from\"./data\";//Util\nimport{playAudio}from\"./util\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){//Ref\nvar audioRef=useRef(null);var _useState=useState(chillhop()),_useState2=_slicedToArray(_useState,2),songs=_useState2[0],setSongs=_useState2[1];var _useState3=useState(songs[0]),_useState4=_slicedToArray(_useState3,2),currentSong=_useState4[0],setCurrentSong=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isPlaying=_useState6[0],setIsPlaying=_useState6[1];var _useState7=useState({currentTime:0,duration:0,animationPercentage:0,volume:0}),_useState8=_slicedToArray(_useState7,2),songInfo=_useState8[0],setSongInfo=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),libraryStatus=_useState10[0],setLibraryStatus=_useState10[1];var timeUpdateHandler=function timeUpdateHandler(e){var current=e.target.currentTime;var duration=e.target.duration;var roundedCurrent=Math.round(current);var roundedDuration=Math.round(duration);var percentage=Math.round(roundedCurrent/roundedDuration*100);setSongInfo(_objectSpread(_objectSpread({},songInfo),{},{currentTime:current,duration:duration,animationPercentage:percentage,volume:e.target.volume}));};var songEndHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var currentIndex;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:currentIndex=songs.findIndex(function(song){return song.id===currentSong.id;});_context.next=3;return setCurrentSong(songs[(currentIndex+1)%songs.length]);case 3:playAudio(isPlaying,audioRef);return _context.abrupt(\"return\");case 5:case\"end\":return _context.stop();}},_callee);}));return function songEndHandler(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"App \".concat(libraryStatus?\"library-active\":\"\"),children:[/*#__PURE__*/_jsx(Nav,{libraryStatus:libraryStatus,setLibraryStatus:setLibraryStatus}),/*#__PURE__*/_jsx(Song,{isPlaying:isPlaying,currentSong:currentSong}),/*#__PURE__*/_jsx(Player,{audioRef:audioRef,setIsPlaying:setIsPlaying,currentSong:currentSong,isPlaying:isPlaying,songInfo:songInfo,setSongInfo:setSongInfo,songs:songs,setSongs:setSongs,setCurrentSong:setCurrentSong}),/*#__PURE__*/_jsx(Library,{songs:songs,setCurrentSong:setCurrentSong,audioRef:audioRef,isPlaying:isPlaying,setSongs:setSongs,libraryStatus:libraryStatus}),/*#__PURE__*/_jsx(\"audio\",{onLoadedMetadata:timeUpdateHandler,onTimeUpdate:timeUpdateHandler,ref:audioRef,src:currentSong.audio,onEnded:songEndHandler})]});}export default App;","map":{"version":3,"names":["React","useState","useRef","Player","Song","Library","Nav","chillhop","playAudio","jsx","_jsx","jsxs","_jsxs","App","audioRef","_useState","_useState2","_slicedToArray","songs","setSongs","_useState3","_useState4","currentSong","setCurrentSong","_useState5","_useState6","isPlaying","setIsPlaying","_useState7","currentTime","duration","animationPercentage","volume","_useState8","songInfo","setSongInfo","_useState9","_useState10","libraryStatus","setLibraryStatus","timeUpdateHandler","e","current","target","roundedCurrent","Math","round","roundedDuration","percentage","_objectSpread","songEndHandler","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","currentIndex","wrap","_callee$","_context","prev","next","findIndex","song","id","length","abrupt","stop","apply","arguments","className","concat","children","onLoadedMetadata","onTimeUpdate","ref","src","audio","onEnded"],"sources":["C:/Users/lefty/Documents/reactproject/music-player/src/App.js"],"sourcesContent":["import React, { useState, useRef } from \"react\";\nimport \"./styles/app.scss\";\n//Import Components\nimport Player from \"./components/Player\";\nimport Song from \"./components/Song\";\nimport Library from \"./components/Library\";\nimport Nav from \"./components/Nav\";\n//Import data\nimport chillhop from \"./data\";\n//Util\nimport { playAudio } from \"./util\";\n\nfunction App() {\n  //Ref\n  const audioRef = useRef(null);\n\n  const [songs, setSongs] = useState(chillhop());\n  const [currentSong, setCurrentSong] = useState(songs[0]);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [songInfo, setSongInfo] = useState({\n    currentTime: 0,\n    duration: 0,\n    animationPercentage: 0,\n    volume: 0,\n  });\n  const [libraryStatus, setLibraryStatus] = useState(false);\n\n  const timeUpdateHandler = (e) => {\n    const current = e.target.currentTime;\n    const duration = e.target.duration;\n\n    const roundedCurrent = Math.round(current);\n    const roundedDuration = Math.round(duration);\n    const percentage = Math.round((roundedCurrent / roundedDuration) * 100);\n    setSongInfo({\n      ...songInfo,\n      currentTime: current,\n      duration: duration,\n      animationPercentage: percentage,\n      volume: e.target.volume,\n    });\n  };\n  const songEndHandler = async () => {\n    let currentIndex = songs.findIndex((song) => song.id === currentSong.id);\n    await setCurrentSong(songs[(currentIndex + 1) % songs.length]);\n    playAudio(isPlaying, audioRef);\n    return;\n  };\n  return (\n    <div className={`App ${libraryStatus ? \"library-active\" : \"\"}`}>\n      <Nav libraryStatus={libraryStatus} setLibraryStatus={setLibraryStatus} />\n      <Song isPlaying={isPlaying} currentSong={currentSong} />\n      <Player\n        audioRef={audioRef}\n        setIsPlaying={setIsPlaying}\n        currentSong={currentSong}\n        isPlaying={isPlaying}\n        songInfo={songInfo}\n        setSongInfo={setSongInfo}\n        songs={songs}\n        setSongs={setSongs}\n        setCurrentSong={setCurrentSong}\n      />\n      <Library\n        songs={songs}\n        setCurrentSong={setCurrentSong}\n        audioRef={audioRef}\n        isPlaying={isPlaying}\n        setSongs={setSongs}\n        libraryStatus={libraryStatus}\n      />\n      <audio\n        onLoadedMetadata={timeUpdateHandler}\n        onTimeUpdate={timeUpdateHandler}\n        ref={audioRef}\n        src={currentSong.audio}\n        onEnded={songEndHandler}\n      ></audio>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}